---

interface Props {
  source: string
  feature: string
  lastUpdated?: number
}

const { source, lastUpdated, feature } = Astro.props
let updated = ''
let dateStr = ''

if (lastUpdated) {
  const date = new Date(lastUpdated)
  const year = date.getFullYear()
  const month = String(date.getMonth() + 1).padStart(2, '0')
  const day = String(date.getDate()).padStart(2, '0')
  updated = `${year}-${month}-${day}`
  dateStr = date.toISOString()
}
---

<footer class="footer">
  { source && <span>data: </span> }
  {source === 'caniuse' && (<a href={`https://caniuse.com/${feature}`} target="_blank" rel="noopener noreferrer" aria-label="caniuse">caniuse</a>)}
  {source === 'mdn' && (<a href="https://github.com/mdn/browser-compat-data" target="_blank" rel="noopener noreferrer" aria-label="MDN">MDN</a>)}
  { source && '| ' }
  { source && <span>embed: </span> }
  { source && <a class="embed-link" href="https://caniuse-embed.vercel.app/" target="_blank" rel="noopener noreferrer" aria-label="caniuse-embed">caniuse-embed.vercel.app</a> }
  { updated && <time datetime={dateStr}><span>updated: </span>{updated}</time> }
</footer>
